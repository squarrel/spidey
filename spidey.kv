#:kivy 1.9.0

SpideyGame:

<SpideyGame>:
	gameworld: gameworld
	beetle_system: beetle_system
	boxes: boxes
	
	GameWorld:
		id: gameworld
		gamescreenmanager: gamescreenmanager
		size_of_gameworld: 100*1024
		zones: {'general': 20000}
		PositionSystem2D:
			system_id: 'position'
			gameworld: gameworld
			zones: ['general']
			size_of_component_block: 128
		Renderer:
			gameworld: gameworld
			system_id: 'renderer'
			zones: ['general']
			frame_count: 2
			updateable: True
			size_of_batches: 512
			size_of_component_block: 128
			shader_source: 'assets/glsl/positionshader.glsl'
		BeetleSystem:
			id: beetle_system
			system_id: 'beetle_system'
			gameworld: gameworld
			updateable: True
			#update_time: 0.1
		Boxes:
			id boxes
			system_id: 'boxes'

	GameScreenManager:
		id: gamescreenmanager
		size: root.size
		pos: root.pos
		gameworld: gameworld

<GameScreenManager>:
	MenuScreen:
		id: menu_screen
	MainScreen:
		id: main_screen
	MessageScreen:
		id: message_screen
	SettingsScreen:
		id: settings_screen
		
<MenuScreen@GameScreen>:
	name: 'menu'
	FloatLayout:
		Button:
			text: 'Play'
			size_hint: (.2, .1)
			pos_hint: {'x': .45, 'y': .55}
			on_press: root.manager.current = 'main'
		Button:
			text: 'Settings'
			size_hint: (.2, .1)
			pos_hint: {'x': .45, 'y': 45}
			on_press: root.manager.current = 'main'
		DebugPanel:
			size_hint: (.2, .1)
			pos_hint: {'x': .225, 'y': .025}
			
<MainScreen@GameScreen>:
	name: 'main'
	FloatLayout:
		Label:
			text: 'The Main'
			size_hint: (.2, .1)
			pos_hint: {'x': .45, 'y': .55}
				
<MessageScreen@GameScreen>:
	name: 'message'
	FloatLayout:
		Label:
			text: 'The Message'
				
<SettingsScreen@GameScreen>:
	name: 'settings'
	FloatLayout:
		Label:
			text: 'The settings'
			
<DebugPanel>:
	Label:
		pos: root.pos
		size: root.size
		font_size: root.size[1] * .5
		halign: 'center'
		valign: 'middle'
		color: (1, 1, 1, 1)
		text: 'FPS: ' + root.fps if root.fps != None else 'FPS:'
